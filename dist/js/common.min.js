!function(){var t=function(t,e,i){var n=this;this.changeColor=document.getElementById(e),this.numOfLines=document.getElementById(i),this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.objects={dots:[],lines:[]},this.color="#ddaaff",this.numPrev=2,this.canvas.onclick=function(t){n.newdot(n.objects,t.pageX,t.pageY,n.color,n.numPrev)},this.changeColor.onchange=function(){n.color=n.changeColor.value},this.numOfLines.onchange=function(){n.numOfLines.value.match(/[0-9]/gi)&&(n.numPrev=n.numOfLines.value)};var o=function(){n.render(n.ctx,n.objects,n.canvas.width,n.canvas.height),requestAnimationFrame(o)};setTimeout(o,500)};t.prototype={render:function(t,e,i,n){t.clearRect(0,0,i,n);for(var o=0;o<e.lines.length;o++)e.lines[o].render(t);for(var o=0;o<e.dots.length;o++)e.dots[o].render(t)},newdot:function(t,n,o,s,h){var r={};if(t.dots.length)if(h>=t.dots.length)for(var a=t.dots.length-1;a>=0;a--)r={x:t.dots[a].x,y:t.dots[a].y},t.lines.push(new i(s,n,o,r));else for(var a=t.dots.length-1;a>=t.dots.length-h;a--)r={x:t.dots[a].x,y:t.dots[a].y},t.lines.push(new i(s,n,o,r));t.dots.push(new e(s,n,o))}};var e=function(t,e,i){this.color=t,this.x=e,this.y=i,this.timeParam=10};e.prototype={render:function(t){this.timeParam<20&&(this.timeParam++,t.fillStyle="rgba(220,220,220,.5)",t.beginPath(),t.arc(this.x,this.y,this.timeParam,0,2*Math.PI,!1),t.closePath(),t.fill()),t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,8,0,2*Math.PI,!1),t.closePath(),t.fill()}};var i=function(t,e,i,n){this.color=t,this.x=e,this.y=i,this.prev=n,this.timeParam=0};i.prototype={render:function(t){if(t.strokeStyle=this.color,t.lineWidth=3,this.timeParam<10){this.timeParam++;var e=this.prev.x+(this.x-this.prev.x)/10*this.timeParam,i=this.prev.y+(this.y-this.prev.y)/10*this.timeParam;t.beginPath(),t.moveTo(this.prev.x,this.prev.y),t.lineTo(e,i),t.stroke(),t.closePath()}else t.beginPath(),t.moveTo(this.prev.x,this.prev.y),t.lineTo(this.x,this.y),t.stroke(),t.closePath()}},window.onload=function(){editor=new t("editor","color-change","num-of-lines")}}();