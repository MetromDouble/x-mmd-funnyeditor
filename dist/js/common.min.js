!function(){var t=function(t){var e=this;this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.objects={dots:[],lines:[]},this.color="#f77",this.numPrev=3,this.canvas.onclick=function(t){e.newdot(e.objects,t.pageX,t.pageY,e.color,e.numPrev)};var i=function(){e.render(e.ctx,e.objects,e.canvas.width,e.canvas.height),requestAnimationFrame(i)};setTimeout(i,500)};t.prototype={render:function(t,e,i,s){t.clearRect(0,0,i,s);for(var o=0;o<e.dots.length;o++)e.dots[o].render(t);for(var o=0;o<e.lines.length;o++)e.lines[o].render(t)},newdot:function(t,s,o,n,r){var h={};if(t.dots.length)if(r>=t.dots.length)for(var a=t.dots.length-1;a>=0;a--)h={x:t.dots[a].x,y:t.dots[a].y},t.lines.push(new i(n,s,o,h));else for(var a=t.dots.length-1;a>=t.dots.length-r;a--)h={x:t.dots[a].x,y:t.dots[a].y},t.lines.push(new i(n,s,o,h));t.dots.push(new e(n,s,o))}};var e=function(t,e,i){this.color=t,this.x=e,this.y=i,this.timeParam=10};e.prototype={render:function(t){this.timeParam<20&&(this.timeParam++,t.fillStyle="rgba(220,220,220,.5)",t.beginPath(),t.arc(this.x,this.y,this.timeParam,0,2*Math.PI,!1),t.closePath(),t.fill()),t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,8,0,2*Math.PI,!1),t.closePath(),t.fill()}};var i=function(t,e,i,s){this.color=t,this.x=e,this.y=i,this.prev=s,this.timeParam=0};i.prototype={render:function(t){if(t.strokeStyle=this.color,t.lineWidth=3,this.timeParam<10){this.timeParam++;var e=this.prev.x+(this.x-this.prev.x)/10*this.timeParam,i=this.prev.y+(this.y-this.prev.y)/10*this.timeParam;t.beginPath(),t.moveTo(this.prev.x,this.prev.y),t.lineTo(e,i),t.stroke(),t.closePath()}else t.beginPath(),t.moveTo(this.prev.x,this.prev.y),t.lineTo(this.x,this.y),t.stroke(),t.closePath()}},window.onload=function(){editor=new t("editor")}}();